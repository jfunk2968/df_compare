<!DOCTYPE html>
<html>
<head>
<title>Data Frame Comparison</title>

  <script
  src="https://code.jquery.com/jquery-3.1.1.js"
  integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
  crossorigin="anonymous"></script>

  <script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
  integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30="
  crossorigin="anonymous"></script>


  <script>
  $( function() {
    $( "#tabs" ).tabs();
  } );
  </script>

</head>

<style>


tr:nth-child(even) {background-color: #f2f2f2}

table.tableSection {
  display: table;
  border: 1px solid black;
}

table.tableSection thead,table.tableSection tbody {
  /*width: 100%;*/
}

table.tableSection thead {
  overflow-y: scroll;
  display: table;
  table-layout: fixed;
  /*width: calc(100% - 16px); /* assuming scrollbar width as 16px */
}

table.tableSection tbody {
  overflow: auto;
  height: 130px;
  display: block;
}

table.tableSection tr {
  text-align: right;
  display: table;
  table-layout: fixed;
  width: 100%;
}

table.tableSection th {
    background-color: #4CAF50;
    color: white;
    text-align: right;
}

table.tableSection td {
    text-align: right;
}

.button {
    background-color: #4CAF50; /* Green */
    border: none;
    color: white;
    padding: 10px 0px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    width: 300px;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
    cursor: pointer;
}

.button:hover {
    background-color: #4CAF50; /* Green */
    color: white;
}



.container{
    display: flex;
}
.fixed{
    width: 310px;
    height: 400px;
    overflow: auto;
}
.flex-item{
    flex-grow: 1;
}



</style>

<body>

<script>
function showPlotsN(div) {
  var img_idsN = {{ comp['nplots'].keys() }};
  var arrayLengthN = img_idsN.length;

  for (var i = 0; i < arrayLengthN; i++) {
    var x = document.getElementById(img_idsN[i]);
	if (img_idsN[i] === div) {
	    x.style.display = 'block';
	} else {
	    x.style.display = 'none';
	}
  }
}

function showPlotsC(div) {
  var img_idsC = {{ comp['cplots'].keys() }};
  var arrayLengthC = img_idsC.length;

  for (var i = 0; i < arrayLengthC; i++) {
    var x = document.getElementById(img_idsC[i]);
	if (img_idsC[i] === div) {
	    x.style.display = 'block';
	} else {
	    x.style.display = 'none';
	}
  }
}


function formatN(n, dp) {
  var s = ''+(Math.floor(n)), d = n % 1, i = s.length, r = '';
  while ( (i -= 3) > 0 ) { r = ',' + s.substr(i, 3) + r; }
  return s.substr(0, i + 3) + r + (d ? '.' + Math.round(d * Math.pow(10,dp||2)) : '');
}

</script>

<div id='tabs'>

  <ul class="ui-tabs-nav">
    <li><a href="#tabs-1">Column Summary</a></li>
    <li><a href="#tabs-2">Categorical Column Summary</a></li>
    <li><a href="#tabs-3">Categorical Plots</a></li>
    <li><a href="#tabs-4">Numeric Column Summary</a></li>
    <li><a href="#tabs-5">Numeric Plots</a></li>
  </ul>

	<div id="tabs-1">
	<h1>Column Summary</h1>

	<table class="tableSection">
	  <thead>
		<tr>
		<th>Column</th>
		<th>DF 1 Data Type</th>
		<th>DF 2 Data Type</th>
		<th>Same Data Type</th>
		<th>DF Coverage</th>
	  </thead>
	  <tbody>
		</tr>
		{% for index, row in comp['columns'].iterrows() %}
			<tr>
			<td>{{ index }}</td>
			<td>{{ row['df1_type'] }}</td>
			<td>{{ row['df2_type'] }}</td>
			<td>{{ row['diff'] }}</td>
			<td>{{ row['coverage'] }}</td>
			</tr>
		{% endfor %}
	  </tbody>
	</table>
	</div>

	<div id="tabs-2">
	<h1>Column Summary for Categorical Variables</h1>

	<table class="tableSection">
	  <thead>
		<tr>
		<th>Column</th>
		<th>DF 1 Missing Rate</th>
		<th>DF 2 Missing Rate</th>
		<th>DF 1 Mode Rate</th>
		<th>DF 2 Mode Rate</th>
		<th>Chi-Square P-Value</th>
	  </thead>
	  <tbody>
		</tr>
		{% for index, row in comp['char_stats'].iterrows() %}
			<tr>
			<td>{{ row['variable'] }}</td>
			<td>{{ '{:.4f}'.format(row['missing_df1']) }}</td>
			<td>{{ '{:.4f}'.format(row['missing_df2']) }}</td>
			<td>{{ '{:.4f}'.format(row['pct_mode_df1']) }}</td>
			<td>{{ '{:.4f}'.format(row['pct_mode_df2']) }}</td>
			<td>{{ row['chisq_pval'] }}</td>
			</tr>
		{% endfor %}
	  </tbody>
	</table>
	</div>



	<div class="container" id="tabs-3">
	  <div class="fixed">

		{% for c in comp['cplots'].keys() %}
		  <div>
			<button class="button" onclick="showPlotsC('{{ c }}')">{{ c, '{:.4f}'.format(comp['cplots'][c][1]) }}</button>
		  </div>
		{% endfor %}
	  </div>

	  <div class="flex-item">
		{% for c in comp['cplots'].keys() %}
		  <div style="display:none;" id="{{ c }}">
			<img src="{{ comp['cplots_bytes'][c] }}">
		  </div>
		{% endfor %}
	  </div>
	</div>


	<div id="tabs-4">
	<h1>Column Summary for Numeric Variables</h1>

	<table class="tableSection">
	  <thead>
		<tr>
		<th>Column</th>
		<th>DF 1 Missing Rate</th>
		<th>DF 2 Missing Rate</th>
		<th>DF 1 Zero Rate</th>
		<th>DF 2 Zero Rate</th>
		<th>DF 1 Mean Rate</th>
		<th>DF 2 Mean Rate</th>
		<th>DF 1 Min Rate</th>
		<th>DF 2 Min Rate</th>
		<th>DF 1 Max Rate</th>
		<th>DF 2 Max Rate</th>
		<th>KS P-Value</th>
	  </thead>
	  <tbody>
		</tr>
		{% for index, row in comp['num_stats'].iterrows() %}
			<tr>
			<td>{{ row['variable'] }}</td>
			<td>{{ '{:.4f}'.format(row['missing_df1']) }}</td>
			<td>{{ '{:.4f}'.format(row['missing_df2']) }}</td>
			<td>{{ '{:.4f}'.format(row['zero_df1']) }}</td>
			<td>{{ '{:.4f}'.format(row['zero_df2']) }}</td>
			<td>{{ '{:.4f}'.format(row['mean_df1']) }}</td>
			<td>{{ '{:.4f}'.format(row['mean_df2']) }}</td>
			<td>{{ '{:.4f}'.format(row['min_df1']) }}</td>
			<td>{{ '{:.4f}'.format(row['min_df2']) }}</td>
			<td>{{ '{:.4f}'.format(row['max_df1']) }}</td>
			<td>{{ '{:.4f}'.format(row['max_df2']) }}</td>
			<td>{{ '{:.4f}'.format(row['ks_pval']) }}</td>
			</tr>
		{% endfor %}
	  </tbody>
	</table>
	</div>


	<div class="container" id="tabs-5">
	  <div class="fixed">

		{% for n in comp['nplots'].keys() %}
		  <div>
			<button class="button" onclick="showPlotsN('{{ n }}')">{{ n, '{:.4f}'.format(comp['nplots'][n][1]) }}</button>
		  </div>
		{% endfor %}
	  </div>

	  <div class="flex-item">
		{% for n in comp['nplots'].keys() %}
		  <div style="display:none;" id="{{ n }}">
			<img src="{{ comp['nplots_bytes'][n] }}">
		  </div>
		{% endfor %}
	  </div>
	</div>

</div>

</body>
</html>